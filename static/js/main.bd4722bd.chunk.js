(this["webpackJsonpcurrency-converter"]=this["webpackJsonpcurrency-converter"]||[]).push([[0],{38:function(e,t,r){},40:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){},48:function(e,t,r){},51:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(12),c=r.n(a),s=r(7),u=r.n(s),i=r(11),o=r(13),l=r(14),d=r(18),v=r(17),b=r(15),j=function(e){return{type:"SET_LIST_STATUS",payload:e}},y=r(10),p=r.n(y),h=function(e){return e>=.1?+e.toFixed(2):e<.1&&e>0?+e.toFixed(3):0===e?0:void 0},U=(p.a.string,p.a.number,function(e){return"current"===e?"converted":"current"}),f=function(e,t,r,n){!t||"click"!==e.type&&"Tab"!==e.key||e.target.getAttribute("data-element-type")!==r&&n()},B=function(e,t){return e?h(+e*t):""},m=(r(38),r(1)),O=function(){return Object(m.jsx)("div",{className:"error-indicator",children:Object(m.jsx)("p",{children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"})})},R=function(e){Object(d.a)(r,e);var t=Object(v.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(l.a)(r,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(m.jsx)(O,{}):this.props.children}}]),r}(n.Component),S=r(16),E=(r(40),function(e){var t=e.onInputChange,r=e.type,n=e.currencyValue,a=function(){return t({type:r,value:""})};return Object(m.jsxs)("div",{className:"converter__input-block",children:[Object(m.jsx)("input",{type:"text",value:n,onChange:function(e){var a=e.target.value;(a=function(e){var t,r=null===(t=e.match(/^\.|^,|[^\d.,]|[.,]\d+[.,]|([.,]{2})/gm))||void 0===t?void 0:t[0];if(r){var n=e.indexOf(r);e=e.slice(0,n)+e.slice(n+1)}"0"===e[0]&&e.length>1&&"."!==e[1]&&(e=e.slice(1));var a=e.indexOf(",");return-1!==a&&(e=e.slice(0,a)+"."+e.slice(a+1)),e}(a))!==n&&t({type:r,value:a})},maxLength:15}),Object(m.jsx)("span",{onClick:a,onKeyDown:function(e){"Enter"===e.key&&a()},className:"converter__input-clear",tabIndex:"0",children:"\xd7"})]})}),N=(r(41),function(e){var t=e.dataType,r=void 0===t?"":t,n=e.onClick,a=e.children,c=e.classNames,s=void 0===c?"":c;return Object(m.jsxs)("button",{"data-element-type":r,className:"selected-currency-button ".concat(s),onClick:n,children:[a,Object(m.jsx)("i",{className:"fa--converter fa fa-angle-down","data-element-type":r})]})}),x=(r(42),function(e){var t=e.children,r=e.classNames,n=void 0===r?"":r,a=e.dataType,c=void 0===a?"":a,s=e.onClick,u=void 0===s?function(){}:s,i=function(e){e.target.dataset.elementType===c&&("Enter"!==e.key&&"click"!==e.type||u(e.target.dataset.elementValue))};return Object(m.jsx)("ul",{className:"currency-list ".concat(n),onKeyDown:i,onClick:i,children:t.map((function(e,t){return Object(m.jsx)("li",{className:"currency-list-item","data-element-type":c,"data-element-value":e,tabIndex:"0",children:e},t)}))})}),g=r(54),D=(r(43),function(e){var t=e.dataType,r=e.toggleHandler,n=e.activeStatus,a=e.currency,c=e.currencyList,s=e.currencyListClickHandler,u=void 0===s?function(){}:s;return Object(m.jsxs)("div",{className:"converter__currency-type-block",children:[Object(m.jsx)(g.a,{in:n,timeout:200,children:function(e){return Object(m.jsx)(N,{dataType:t,onClick:r,classNames:e,children:a})}}),Object(m.jsx)(g.a,{in:n,timeout:200,mountOnEnter:!0,unmountOnExit:!0,children:function(e){return Object(m.jsx)(x,{dataType:t,classNames:e,onClick:u,children:c})}})]})}),C=D,T=(r(44),{addCurrencyValue:function(e){return{type:"ADD_CURRENCY_VALUE",payload:e}},setListStatus:j,setCurrency:function(e){return{type:"SET_CURRENCY",payload:e}}}),P=Object(b.b)((function(e){var t=e.converter,r=e.currencyList;return{converter:{current:{value:t.current.value,currency:t.current.currency},converted:{value:t.converted.value,currency:t.converted.currency},dataType:t.dataType,listsStatus:t.listsStatus},currencyList:r}}),T)((function(e){var t=e.type,r=e.converter,n=e.setListStatus,a=e.setCurrency,c=e.fetch,s=e.addCurrencyValue,o=e.currencyList,l=function(){var e=U(t),a=Object(S.a)({},t,!r.listsStatus[t]);r.listsStatus[e]&&(a[e]=!1),n(a)},d=function(){var e=Object(i.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({type:t,value:r});case 2:return e.next=4,c();case 4:l();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"converter__currency-block",children:[Object(m.jsx)(E,{onInputChange:function(e){return s(e)},currencyValue:r[t].value,type:t}),Object(m.jsx)(C,{dataType:r.dataType,toggleHandler:l,activeStatus:r.listsStatus[t],currency:r[t].currency,currencyList:o,currencyListClickHandler:d})]})})),_=(r(45),function(e){var t=e.rowTypes,r=e.fetch;return Object(m.jsx)("main",{className:"converter",children:Object(m.jsx)("div",{className:"converter__wrapper",children:t.map((function(e){var t=e.id,n=e.type;return Object(m.jsx)(P,{type:n,fetch:r},t)}))})})}),Y=function(e){Object(d.a)(r,e);var t=Object(v.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={error:{status:!1,message:null}},e.onError=function(t){throw e.setState({error:{status:!0,message:t.message}}),t},e.rowTypes=[{id:0,type:"current"},{id:1,type:"converted"}],e.listDisabler=function(t){var r=e.props.converter,n=r.dataType,a=r.listsStatus,c=a.current,s=a.converted;f(t,c||s,n,(function(){return e.props.setListStatus({current:!1,converted:!1})}))},e.fetchCurrenciesInfo=Object(i.a)(u.a.mark((function t(){var r,n,a,c,s,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,n=r.currencyPairService,a=r.fetchPairValue,c=r.converter,s=c.current.currency,i=c.converted.currency,o=[s+i,i+s],n.getCourse(o).then(a).catch(e.onError);case 3:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.fetchCurrenciesInfo(),document.addEventListener("click",this.listDisabler),document.addEventListener("keyup",this.listDisabler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.listDisabler),document.removeEventListener("keyup",this.listDisabler)}},{key:"render",value:function(){var e=this.state.error.status;return Object(m.jsx)(R,{children:e&&Object(m.jsx)(O,{})||Object(m.jsx)(_,{rowTypes:this.rowTypes,fetch:this.fetchCurrenciesInfo})})}}]),r}(n.Component),k={fetchPairValue:function(e){return{type:"FETCH_PAIR_VALUE",payload:e}},setListStatus:j},w=Object(b.b)((function(e){var t=e.converter,r=e.currencyPairService;return{converter:{current:{currency:t.current.currency},converted:{currency:t.converted.currency},dataType:t.dataType,listsStatus:t.listsStatus},currencyPairService:r}}),k)(Y),L=r(2),G=(r(46),function(e){var t=e.children;return Object(m.jsx)("div",{className:"spinner ".concat(t),children:Object(m.jsx)("div",{className:"loadingio-spinner-eclipse-p19pnm2p23",children:Object(m.jsx)("div",{className:"ldio-pnzr8yywkb",children:Object(m.jsx)("div",{})})})})}),A=r(28),I=function(e){var t=e.children;return Object(m.jsx)("tbody",{children:Object.entries(t).map((function(e,t){var r=Object(A.a)(e,2),n=r[0],a=r[1];return Object(m.jsxs)("tr",{className:"currency-table__row",children:[Object(m.jsxs)("td",{children:[n.slice(0,3),"/",n.slice(3)]}),Object(m.jsx)("td",{children:a})]},t)}))})},V=(r(47),function(e){var t=e.children,r=t.headerValues,n=t.bodyValues;return Object(m.jsx)("div",{className:"currency-table__wrapper",children:Object(m.jsxs)("table",{className:"currency-table",children:[Object(m.jsx)("thead",{children:Object(m.jsx)("tr",{className:"currency-table__row",children:r.map((function(e){var t=e.id,r=e.value;return Object(m.jsx)("th",{children:r},t)}))})}),Object(m.jsx)(I,{children:n})]})})}),H=function(e){Object(d.a)(r,e);var t=Object(v.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a)))._INITIAL_STATE={activeStatus:!1,isLoading:!0,error:{status:!1,message:null}},e.state=Object(L.a)({},e._INITIAL_STATE),e.spinnerClassname="currencies-table",e.tableHeaderValues=[{id:1,value:"\u0412\u0430\u043b\u044e\u0442\u0430"},{id:2,value:"\u0426\u0435\u043d\u0430"}],e.toggle=function(){return e.setState((function(e){return{activeStatus:!e.activeStatus}}))},e.sendCurrency=function(){var t=Object(i.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.setCurrencyInTable(r);case 2:return t.next=4,e.addAllCourses();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onError=function(t){throw e.setState({error:{status:!0,message:t.message},isLoading:!1}),t},e.addAllCourses=Object(i.a)(u.a.mark((function t(){var r,n,a,c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.currencyPairService,a=r.currencyList,c=r.currenciesTable.currentCurrency,s=r.addCurrenciesValues,e.setState(Object(L.a)({},e._INITIAL_STATE)),t.next=4,n.getAllCourses(c,a).then(s).catch(e.onError);case 4:e.setState({isLoading:!1});case 5:case"end":return t.stop()}}),t)}))),e.listDisabler=function(t){var r=e.state.activeStatus,n=e.props.currenciesTable.dataType;f(t,r,n,(function(){return e.setState({activeStatus:!1})}))},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.addAllCourses(),document.addEventListener("click",this.listDisabler),document.addEventListener("keyup",this.listDisabler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.listDisabler),document.removeEventListener("keyup",this.listDisabler)}},{key:"render",value:function(){var e,t=this.props,r=t.currencyList,n=t.currenciesTable,a=n.currentCurrency,c=n.values,s=n.dataType,u=this.state,i=u.activeStatus,o=u.isLoading,l=u.error.status,d={headerValues:this.tableHeaderValues,bodyValues:c};return l||o?o?e=Object(m.jsx)(G,{children:this.spinnerClassname}):l&&(e=Object(m.jsx)(O,{})):e=Object(m.jsx)(V,{children:d}),Object(m.jsx)(R,{children:Object(m.jsxs)("div",{className:"currency-table__component",children:[e,Object(m.jsx)(D,{dataType:s,toggleHandler:this.toggle,activeStatus:i,currency:a,currencyList:r,currencyListClickHandler:this.sendCurrency})]})})}}]),r}(n.Component),F={addCurrenciesValues:function(e){return{type:"ADD_CURRENCIES_VALUES",payload:e}},setCurrencyInTable:function(e){return{type:"SET_CURRENCY_IN_TABLE",payload:e}}},M=Object(b.b)((function(e){return{currencyList:e.currencyList,currenciesTable:e.currenciesTable,currencyPairService:e.currencyPairService}}),F)(H),J=r(20),K=r(4),W=(r(48),function(){return Object(m.jsxs)("div",{className:"switch-buttons",children:[Object(m.jsx)(J.b,{to:"/",activeClassName:"active",exact:!0,children:"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440"}),Object(m.jsx)(J.b,{to:"/currencies-table",activeClassName:"active",children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0432\u0430\u043b\u044e\u0442"})]})}),q=function(){return Object(m.jsx)(J.a,{children:Object(m.jsxs)("div",{className:"currencies-app",children:[Object(m.jsx)(W,{}),Object(m.jsxs)(K.d,{children:[Object(m.jsx)(K.b,{path:"/",component:w,exact:!0}),Object(m.jsx)(K.b,{path:"/currencies-table",component:M}),Object(m.jsx)(K.a,{to:"/"})]})]})})},z=r(29),Q={current:{currency:"USD",value:1,exchangeRate:""},converted:{currency:"RUB",value:"",exchangeRate:""},listsStatus:{current:!1,converted:!1},dataType:"currency-converter-item"},X=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"FETCH_PAIR_VALUE":var n=t.current.value,a=n?h(n*r.payload[0]):"";return Object(L.a)(Object(L.a)({},t),{},{current:Object(L.a)(Object(L.a)({},t.current),{},{exchangeRate:r.payload[0]}),converted:Object(L.a)(Object(L.a)({},t.converted),{},{value:a,exchangeRate:r.payload[1]})});case"ADD_CURRENCY_VALUE":var c=r.payload,s=c.type,u=c.value,i=U(s),o=B(u,t[s].exchangeRate);return Object(L.a)(Object(L.a)({},t),{},(e={},Object(S.a)(e,s,Object(L.a)(Object(L.a)({},t[s]),{},{value:u||""})),Object(S.a)(e,i,Object(L.a)(Object(L.a)({},t[i]),{},{value:o})),e));case"SET_CURRENCY":return Object(L.a)(Object(L.a)({},t),{},Object(S.a)({},r.payload.type,Object(L.a)(Object(L.a)({},t[r.payload.type]),{},{currency:r.payload.value})));case"SET_LIST_STATUS":return Object(L.a)(Object(L.a)({},t),{},{listsStatus:Object(L.a)(Object(L.a)({},t.listsStatus),r.payload)});default:return t}},Z={values:{},currentCurrency:"USD",dataType:"currency-table-item"},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CURRENCIES_VALUES":return Object(L.a)(Object(L.a)({},e),{},{values:t.payload});case"SET_CURRENCY_IN_TABLE":return Object(L.a)(Object(L.a)({},e),{},{currentCurrency:t.payload});default:return e}},ee=r(26),te=r(27),re=function(){var e=Object(i.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={"USDRUB,RUBUSD":{data:{USDRUB:"64.1824",RUBUSD:"0.0155806"},message:"rates",status:200},"USDEUR,EURUSD":{data:{USDEUR:"0.92674",EURUSD:"1.07905"},message:"rates",status:200},"USDGBP,GBPUSD":{data:{USDGBP:"0.7763",GBPUSD:"1.28841"},message:"rates",status:200},"USDBYN,BYNUSD":{data:{USDBYN:"2.20558",BYNUSD:"0.453396"},message:"rates",status:200},"RUBUSD,USDRUB":{data:{RUBUSD:"0.0155806",USDRUB:"64.1824"},message:"rates",status:200},"RUBEUR,EURRUB":{data:{RUBEUR:"0.0144437",EURRUB:"69.244"},message:"rates",status:200},"RUBGBP,GBPRUB":{data:{RUBGBP:"0.0120952",GBPRUB:"82.6773"},message:"rates",status:200},"RUBBYN,BYNRUB":{data:{RUBBYN:"0.0343642",BYNRUB:"29.1002"},message:"rates",status:200},"EURRUB,RUBEUR":{data:{EURRUB:"69.244",RUBEUR:"0.0144437"},message:"rates",status:200},"EURUSD,USDEUR":{data:{EURUSD:"1.07905",USDEUR:"0.92674"},message:"rates",status:200},"EURGBP,GBPEUR":{data:{EURGBP:"0.83767",GBPEUR:"1.19402"},message:"rates",status:200},"EURBYN,BYNEUR":{data:{EURBYN:"2.37994",BYNEUR:"0.420182"},message:"rates",status:200},"GBPRUB,RUBGBP":{data:{GBPRUB:"82.6773",RUBGBP:"0.0120952"},message:"rates",status:200},"GBPUSD,USDGBP":{data:{GBPUSD:"1.28841",USDGBP:"0.7763"},message:"rates",status:200},"GBPEUR,EURGBP":{data:{GBPEUR:"1.19402",EURGBP:"0.83767"},message:"rates",status:200},"GBPBYN,BYNGBP":{data:{GBPBYN:"2.84169",BYNGBP:"0.351973"},message:"rates",status:200},"BYNRUB,RUBBYN":{data:{BYNRUB:"29.1002",RUBBYN:"0.0343642"},message:"rates",status:200},"BYNUSD,USDBYN":{data:{BYNUSD:"0.453396",USDBYN:"2.20558"},message:"rates",status:200},"BYNEUR,EURBYN":{data:{BYNEUR:"0.420182",EURBYN:"2.37994"},message:"rates",status:200},"BYNGBP,GBPBYN":{data:{BYNGBP:"0.351973",GBPBYN:"2.84169"},message:"rates",status:200}},e.abrupt("return",new Promise((function(e){return setTimeout((function(){return e(r[t])}),100)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=Object(te.a)("formatResult"),ae={currencyList:["RUB","USD","EUR","GBP","BYN"],currencyPairService:new(function(){function e(){Object(o.a)(this,e),this._errorHandler=function(e){switch(e.status){case"500":throw new Error("Misspelled request");case"403":throw new Error("Invalid api-key");default:return}},Object.defineProperty(this,ne,{writable:!0,value:function(e,t){return t.map((function(t){return e[t]}))}})}return Object(l.a)(e,[{key:"getCourse",value:function(e){var t=this;if(e[0]===e[1])return new Promise((function(e){return e([1,1])}));var r="".concat(e[0],",").concat(e[1]);return re(r).then((function(r){return t._errorHandler(r),Object(ee.a)(t,ne)[ne](r.data,e)})).catch((function(e){throw e}))}},{key:"getAllCourses",value:function(e){var t=this;return function(e){var t={USD:{data:{USDRUB:"64.1824",USDEUR:"0.92674",USDGBP:"0.7763",USDBYN:"2.20558"},message:"rates",status:200},RUB:{data:{RUBUSD:"0.0155806",RUBEUR:"0.0144437",RUBGBP:"0.0120952",RUBBYN:"0.0343642"},message:"rates",status:200},EUR:{data:{EURRUB:"69.244",EURUSD:"1.07905",EURGBP:"0.83767",EURBYN:"2.37994"},message:"rates",status:200},GBP:{data:{GBPRUB:"82.6773",GBPUSD:"1.28841",GBPEUR:"1.19402",GBPBYN:"2.84169"},message:"rates",status:200},BYN:{data:{BYNRUB:"29.1002",BYNUSD:"0.453396",BYNEUR:"0.420182",BYNGBP:"0.351973"},message:"rates",status:200}};return new Promise((function(r){return setTimeout((function(){return r(t[e])}),1500)}))}(e).then((function(e){for(var r in t._errorHandler(e),e.data)e.data[r]=h(Number(e.data[r]));return e.data})).catch((function(e){throw e}))}}]),e}())},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;return Object(L.a)(Object(L.a)({},e),{},{converter:X(e.converter,t),currenciesTable:$(e.currenciesTable,t)})},se=Object(z.a)(ce);c.a.render(Object(m.jsx)(b.a,{store:se,children:Object(m.jsx)(q,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.bd4722bd.chunk.js.map